# ちょっかいAPI実装

## 概要
<!-- 何を実装するのか簡潔に記載 -->
ちょっかいの送信・クリア・一覧取得のAPIを実装する。

## 目的・背景
<!-- なぜこの機能が必要か、どんな課題を解決するか -->
ルーム内でユーザーがちょっかいを送り合い、クリアすることでポイントを獲得できるようにする。

## 受け入れ基準
<!-- この機能が完成したと判断できる条件 -->
- [ ] ちょっかいテンプレート一覧APIが実装されている
- [ ] ちょっかい送信APIが実装されている
- [ ] ちょっかいクリアAPIが実装されている
- [ ] 1日の送信制限が機能する
- [ ] APIテストが書かれている

## API仕様
<!-- エンドポイント、メソッド、リクエスト/レスポンス形式 -->

### エンドポイント
```
GET /api/v1/chokkai_templates              # テンプレート一覧
POST /api/v1/rooms/:room_id/chokkais       # ちょっかいを送る
PUT /api/v1/chokkais/:id/clear             # ちょっかいをクリア
GET /api/v1/users/me/chokkais/received     # 受け取ったちょっかい一覧
GET /api/v1/users/me/chokkais/sent         # 送ったちょっかい一覧
```

### リクエスト（ちょっかい送信）
```json
{
  "chokkai": {
    "chokkai_template_id": 1,
    "to_user_id": 2
  }
}
```

### レスポンス（ちょっかい送信）
```json
{
  "chokkai_instance": {
    "id": 1,
    "chokkai_template": { "id": 1, "name": "10回スクワット" },
    "to_user": { "id": 2, "name": "山田花子" },
    "status": "pending",
    "expires_at": "2025-01-11T15:00:00.000Z"
  },
  "remaining_daily_limit": 2
}
```

## 認可・認証要件
- ちょっかい送信はルームメンバーのみ
- ちょっかいクリアは受信者本人のみ
- 1日の送信制限はルーム設定に従う

## 依存関係
- Issue #06-2（ChokkaiInstanceモデル）が完了していること
- Issue #03シリーズ（ポイント管理）が完了していること

## ブランチ
`feature/06-3-chokkai-api`

## テスト計画
- [ ] APIテスト
  - [ ] テンプレート一覧取得
  - [ ] ちょっかい送信成功
  - [ ] 1日制限超過で失敗
  - [ ] ポイント不足で失敗
  - [ ] クリア成功
  - [ ] 非受信者のクリア失敗
